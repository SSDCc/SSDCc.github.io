{"version":3,"file":"serialize-9132de35.js","sources":["../../../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isNil.js","../../../plugins/com.msgbyte.bbcode/src/bbcode/serialize.ts"],"sourcesContent":["/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n * @example\n *\n * _.isNil(null);\n * // => true\n *\n * _.isNil(void 0);\n * // => true\n *\n * _.isNil(NaN);\n * // => false\n */\nfunction isNil(value) {\n  return value == null;\n}\n\nmodule.exports = isNil;\n","import bbcodeParser from './parser';\nimport type { AstNode } from './type';\nimport _isNil from 'lodash/isNil';\n\nfunction bbcodeNodeToPlainText(node: AstNode): string {\n  if (_isNil(node)) {\n    return '';\n  }\n\n  if (typeof node === 'string') {\n    return String(node);\n  } else {\n    if (node.tag === 'img') {\n      return '[图片]';\n    }\n    if (node.tag === 'emoji') {\n      return `:${node.content.join('')}:`;\n    }\n    if (node.tag === 'at') {\n      return `@${node.content.join('')}`;\n    }\n\n    return (node.content ?? [])\n      .map((sub) => bbcodeNodeToPlainText(sub))\n      .join('');\n  }\n}\n\n/**\n * 将 BBCode 转化为普通的字符串\n */\nexport function bbcodeToPlainText(bbcode: string): string {\n  const ast = bbcodeParser.parse(bbcode);\n\n  return ast.map(bbcodeNodeToPlainText).join('');\n}\n"],"names":["_isNil","bbcodeParser"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;EAoBA,SAAS,KAAK,CAAC,KAAK,EAAE;EACtB,EAAE,OAAO,KAAK,IAAI,IAAI,CAAC;EACvB,CAAC;AACD;EACA,IAAA,OAAc,GAAG,KAAK;;ECpBtB,SAAA,qBAAA,CAA+B,IAAuB,EAAA;EAJtD,EAAA,IAAA,EAAA,CAAA;EAKE,EAAA,IAAIA,QAAO,IAAO,CAAA,EAAA;EAChB,IAAO,OAAA,EAAA,CAAA;EAAA,GAAA;EAGT,EAAI,IAAA,OAAO,SAAS,QAAU,EAAA;EAC5B,IAAA,OAAO,MAAO,CAAA,IAAA,CAAA,CAAA;EAAA,GACT,MAAA;EACL,IAAI,IAAA,IAAA,CAAK,QAAQ,KAAO,EAAA;EACtB,MAAO,OAAA,gBAAA,CAAA;EAAA,KAAA;EAET,IAAI,IAAA,IAAA,CAAK,QAAQ,OAAS,EAAA;EACxB,MAAO,OAAA,CAAA,CAAA,EAAI,IAAK,CAAA,OAAA,CAAQ,IAAK,CAAA,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA;EAAA,KAAA;EAE/B,IAAI,IAAA,IAAA,CAAK,QAAQ,IAAM,EAAA;EACrB,MAAO,OAAA,CAAA,CAAA,EAAI,IAAK,CAAA,OAAA,CAAQ,IAAK,CAAA,EAAA,CAAA,CAAA,CAAA,CAAA;EAAA,KAAA;EAG/B,IAAQ,OAAA,CAAA,CAAA,EAAA,GAAA,IAAA,CAAK,YAAL,IAAgB,GAAA,EAAA,GAAA,EAAA,EACrB,IAAI,CAAC,GAAA,KAAQ,qBAAsB,CAAA,GAAA,CAAA,CAAA,CACnC,IAAK,CAAA,EAAA,CAAA,CAAA;EAAA,GAAA;EAAA,CAAA;EAOL,SAAA,iBAAA,CAA2B,MAAwB,EAAA;EACxD,EAAM,MAAA,GAAA,GAAMC,oBAAa,KAAM,CAAA,MAAA,CAAA,CAAA;EAE/B,EAAO,OAAA,GAAA,CAAI,GAAI,CAAA,qBAAA,CAAA,CAAuB,IAAK,CAAA,EAAA,CAAA,CAAA;EAAA;;;;;;;;"}