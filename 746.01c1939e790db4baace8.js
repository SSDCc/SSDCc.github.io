"use strict";(self.webpackChunktailchat_web=self.webpackChunktailchat_web||[]).push([[746],{61500:($,h,e)=>{e.d(h,{R$:()=>x,SH:()=>y,Ux:()=>f});var u=e(52983),O=e(54782),c=e(98281);const f=u.memo(i=>{const E=(0,O.useNavigate)();return u.createElement("div",{className:"absolute bottom-4 left-0 right-0 text-center"},u.createElement("div",{className:"shadow-lg px-6 py-2 rounded-full inline-block bg-indigo-600 hover:bg-indigo-700 text-white cursor-pointer",onClick:()=>{E(i.link)}},i.text))});f.displayName="JumpToButton";const y=u.memo(i=>{const E=`/main/group/${i.groupId}/${i.panelId}`;return u.createElement(f,{link:E,text:(0,c.t)("\u8DF3\u8F6C\u5230\u9762\u677F")})});y.displayName="JumpToGroupPanelButton";const x=u.memo(i=>{const E=i.groupId?`/main/group/${i.groupId}/${i.converseId}`:`/main/personal/converse/${i.converseId}`;return u.createElement(f,{link:E,text:(0,c.t)("\u8DF3\u8F6C\u5230\u4F1A\u8BDD")})});x.displayName="JumpToConverseButton"},28074:($,h,e)=>{e.d(h,{U:()=>M,c:()=>U});var u=e(80474),O=e(72297),c=e(52983),f=e(98281),y=e(93540),x=e(66175),i=e(44611);const E=(0,u.P)(()=>Promise.all([e.e(994),e.e(20)]).then(e.bind(e,28020))),M=c.memo(({raw:D,baseUrl:N})=>{const B=(0,c.useCallback)(o=>(o=(0,f.Awg)(o),(0,f.YQu)(N)?new URL(o,(0,O.Cr)(N)).href:o),[N]),S=(0,c.useMemo)(()=>({img:o=>c.createElement(y.Ee,{style:o.style,width:o.width,height:o.height,src:o.src,preview:!0})}),[]);return c.createElement(E,{className:"tailchat-markdown",transformImageUri:o=>B(o),transformLinkUri:o=>B(o),remarkPlugins:[x.Z],rehypePlugins:[i.Z],linkTarget:"_blank",skipHtml:!0,components:S},D)});M.displayName="Markdown";const U=(0,u.P)(()=>Promise.all([e.e(994),e.e(556),e.e(943)]).then(e.bind(e,92943)).then(D=>D.MarkdownEditor))},9968:($,h,e)=>{e.r(h),e.d(h,{Avatar:()=>o.qE,AvatarUploader:()=>me.C,BaseChatInputButton:()=>fe.L,Button:()=>O.Z,Card:()=>ue,Checkbox:()=>c.Z,CopyableText:()=>o.v$,DefaultFullModalInputEditorRender:()=>Z.jo,DefaultFullModalTextAreaEditorRender:()=>Z.lj,Divider:()=>f.Z,Emoji:()=>Be.d,Empty:()=>D.Z,ErrorBoundary:()=>Te.S,ErrorView:()=>X.o,FullModalField:()=>Z.LP,GroupExtraDataPanel:()=>k,GroupPanelContainer:()=>V.q,GroupPanelSelector:()=>ee,Icon:()=>o.JO,IconBtn:()=>L.a,Image:()=>o.Ee,ImageUploader:()=>me.w,Input:()=>u.Z,JumpToButton:()=>j.Ux,JumpToConverseButton:()=>j.R$,JumpToGroupPanelButton:()=>j.SH,Link:()=>ve.rU,Loadable:()=>Ae.P,Loading:()=>G.g,LoadingOnFirst:()=>De.t,LoadingSpinner:()=>Oe.T,Markdown:()=>le.U,MarkdownEditor:()=>le.c,Menu:()=>x.Z,MessageAckContainer:()=>ce.H,ModalWrapper:()=>P.AB,NoData:()=>Ke.J,NotFound:()=>$e.T,PillTabPane:()=>q.c,PillTabs:()=>q.N,Popover:()=>N.Z,PortalAdd:()=>te.rk,PortalRemove:()=>te.i6,Problem:()=>H.t,SensitiveText:()=>o.PJ,SidebarView:()=>Ne.u,Skeleton:()=>S.Z,Space:()=>y.Z,Switch:()=>E.Z,Table:()=>i.Z,Tag:()=>B.Z,TextArea:()=>He,Tooltip:()=>M.Z,UserAvatar:()=>oe,UserName:()=>Re.v,WebFastForm:()=>o.Po,WebMetaForm:()=>o.Po,Webview:()=>R,WebviewKeepAlive:()=>se,closeModal:()=>P.Mr,createMetaFormSchema:()=>o._D,metaFormFieldSchema:()=>o._6,notification:()=>U.Z,openConfirmModal:()=>P._5,openModal:()=>P.h7,openReconfirmModal:()=>P.VW,useChatInputActionContext:()=>Ee.at,useModalContext:()=>P.vR,withKeepAliveOverlay:()=>Ve.A});var u=e(79546),O=e(75526),c=e(66990),f=e(75217),y=e(58761),x=e(3301),i=e(69104),E=e(44411),M=e(95268),U=e(43991),D=e(65097),N=e(20685),B=e(56489),S=e(55696),o=e(93540),ve=e(10330),ce=e(16365),fe=e(28723),Ee=e(29254),V=e(29188),pe=e(85478),r=e(52983),s=e(98281),H=e(6739),X=e(21597),G=e(18300),L=e(84143),P=e(84208),Pe=e(85466),ge=e.n(Pe),he=Object.defineProperty,ye=Object.defineProperties,xe=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,Q=(t,a,n)=>a in t?he(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,W=(t,a)=>{for(var n in a||(a={}))Ce.call(a,n)&&Q(t,n,a[n]);if(z)for(var n of z(a))Ie.call(a,n)&&Q(t,n,a[n]);return t},Y=(t,a)=>ye(t,xe(a)),w=(t,a,n)=>new Promise((l,m)=>{var p=d=>{try{g(n.next(d))}catch(F){m(F)}},v=d=>{try{g(n.throw(d))}catch(F){m(F)}},g=d=>d.done?l(d.value):Promise.resolve(d.value).then(p,v);g((n=n.apply(t,a)).next())});const b=r.memo(t=>{const{groupId:a,panelId:n,names:l}=t,[m,p]=(0,r.useReducer)(C=>C+1,0),{value:v={},loading:g,error:d}=(0,s.r53)(()=>w(void 0,null,function*(){return(yield Promise.all(l.map(I=>s.o4J.ru.getGroupPanelExtraData(t.groupId,t.panelId,I).then(A=>({name:I,data:A}))))).reduce((I,A)=>Y(W({},I),{[A.name]:A.data}),{})}),[a,n,l,m]),[F]=(0,s.WHr)(a,[s.g3S.core.managePanel]),K=(0,r.useRef)(!1),Xe=(0,s.nWw)(()=>{const C=W({},v);if(!t.renderEdit){console.warn("[GroupExtraDataPanel] Please set renderEdit");return}const I=()=>w(void 0,null,function*(){if(K.current===!0){(0,s.lHp)((0,s.t)("\u6B63\u5728\u4FDD\u5B58, \u8BF7\u7A0D\u540E"));return}ge()(C,v)||(K.current=!0,yield Promise.all(Object.entries(C).map(([A,ze])=>s.o4J.ru.saveGroupPanelExtraData(a,n,A,ze))),K.current=!1,p(),(0,s.jiy)())});(0,P.h7)(t.renderEdit(C),{onCloseModal:I})});return d?r.createElement(X.o,{error:d}):r.createElement(V.q,{groupId:a,panelId:n,prefixActions:()=>F?[r.createElement(L.a,{key:"edit",title:(0,s.t)("\u7F16\u8F91"),shape:"square",icon:"mdi:square-edit-outline",iconClassName:"text-2xl",onClick:Xe})]:[]},r.createElement(G.g,{className:"h-full w-full",spinning:g},r.createElement("div",{className:"overflow-auto h-full"},t.render(v))))});b.displayName="GroupExtraDataPanelInner";const k=r.memo(t=>{const a=(0,pe.D)();return a===null?r.createElement(H.t,{text:(0,s.t)("\u7EC4\u4EF6\u53EA\u80FD\u5728\u7FA4\u7EC4\u9762\u677F\u4E2D\u624D\u80FD\u6B63\u5E38\u663E\u793A")}):r.createElement(b,Y(W({},t),{groupId:a.groupId,panelId:a.panelId}))});k.displayName="GroupExtraDataPanel";var q=e(83667),Z=e(7606),Ae=e(80474),Oe=e(38887),De=e(36932),Ne=e(3856),_=e(73246),Fe=e(50842);const{Option:Me}=_.Z,ee=r.memo(t=>{var a,n;const l=(0,Fe.b)(),m=(a=t.groupId)!=null?a:l,p=(n=t.panelType)!=null?n:s.Xpe.TEXT,v=(0,s.Ew8)(m),g=(0,r.useMemo)(()=>v.filter(d=>d.type===p),[v,p]);return r.createElement(_.Z,{className:t.className,style:t.style,placeholder:(0,s.t)("\u8BF7\u9009\u62E9\u9762\u677F"),value:t.value,onChange:t.onChange},g.map(d=>r.createElement(Me,{key:d.id,value:d.id},d.name)))});ee.displayName="GroupPanelSelector";var Be=e(53652),te=e(442),Te=e(67706),Ue=Object.defineProperty,Se=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,re=(t,a,n)=>a in t?Ue(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,Le=(t,a)=>{for(var n in a||(a={}))ae.call(a,n)&&re(t,n,a[n]);if(T)for(var n of T(a))ne.call(a,n)&&re(t,n,a[n]);return t},We=(t,a)=>Se(t,Ge(a)),Ze=(t,a)=>{var n={};for(var l in t)ae.call(t,l)&&a.indexOf(l)<0&&(n[l]=t[l]);if(t!=null&&T)for(var l of T(t))a.indexOf(l)<0&&ne.call(t,l)&&(n[l]=t[l]);return n};const oe=r.memo(t=>{const a=t,{userId:n}=a,l=Ze(a,["userId"]),m=(0,s.xzJ)(n);return r.createElement(o.qE,We(Le({},l),{src:m.avatar,name:m.nickname}))});oe.displayName="UserAvatar";var Re=e(66559),le=e(28074),Je=e(13893);const R=t=>{const a=(0,r.useRef)(null),[n,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{var m;const p=()=>{l(!1)};return(m=a.current)==null||m.addEventListener("load",p),()=>{var v;(v=a.current)==null||v.removeEventListener("load",p)}},[]),r.createElement(G.g,{spinning:n,className:"w-full h-full",tip:(0,s.t)("\u52A0\u8F7D\u7F51\u9875\u4E2D...")},r.createElement("iframe",{ref:a,className:"w-full h-full",src:t.url}))};R.displayName="Webview";const se=(0,Je.A)(R,{cacheId:t=>t.url});se.displayName="WebviewKeepAlive";var je=e(74774);const J=r.memo(t=>r.createElement("div",{className:"w-3/4"},r.createElement("div",{className:"max-w-full border border-black border-opacity-20 rounded-md p-2 bg-black bg-opacity-5 dark:bg-black dark:bg-opacity-10 inline-flex overflow-hidden",style:{minWidth:240}},t.children)));J.displayName="CardWrapper";const de=r.memo(t=>{var a;const n=(a=t.payload)!=null?a:{},l=(0,s.nWw)(()=>{(0,je.GR)(n.url,n.label)});return r.createElement(J,null,r.createElement("div",{className:"flex w-full items-center"},r.createElement("div",{className:"mr-3 overflow-hidden flex-1"},r.createElement("div",{className:"flex text-lg items-center"},r.createElement(o.JO,{icon:"mdi:paperclip"}),r.createElement("span",{className:"ml-1"},(0,s.t)("\u6587\u4EF6"))),r.createElement("div",{className:"text-sm text-black text-opacity-60 dark:text-white dark:text-opacity-60"},n.label)),r.createElement(L.a,{title:(0,s.t)("\u4E0B\u8F7D"),icon:"mdi:cloud-download-outline",onClick:l})))});de.displayName="FileCard";var ie=e(7975);const ue=r.memo(t=>{if(ie.pluginCardItemMap[t.type]){const n=ie.pluginCardItemMap[t.type].render;return r.createElement(n,{payload:t.payload})}return t.type==="file"?r.createElement(de,{payload:t.payload}):r.createElement(J,null,(0,s.t)("\u672A\u77E5\u7684\u5361\u7247\u7C7B\u578B"))});ue.displayName="Card";var j=e(61500),Ke=e(15333),$e=e(64939),Ve=e(74312),me=e(92951);const He=u.Z.TextArea}}]);
