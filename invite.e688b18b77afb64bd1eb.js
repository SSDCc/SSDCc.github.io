"use strict";(self.webpackChunktailchat_web=self.webpackChunktailchat_web||[]).push([[152],{75217:(L,x,n)=>{n.d(x,{Z:()=>A});var e=n(97364),m=n(93585),c=n(87608),y=n.n(c),h=n(52983),I=n(94920),f=function(p,u){var i={};for(var a in p)Object.prototype.hasOwnProperty.call(p,a)&&u.indexOf(a)<0&&(i[a]=p[a]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,a=Object.getOwnPropertySymbols(p);C<a.length;C++)u.indexOf(a[C])<0&&Object.prototype.propertyIsEnumerable.call(p,a[C])&&(i[a[C]]=p[a[C]]);return i},t=function(u){var i,a=h.useContext(I.E_),C=a.getPrefixCls,R=a.direction,O=u.prefixCls,B=u.type,b=B===void 0?"horizontal":B,N=u.orientation,P=N===void 0?"center":N,r=u.orientationMargin,s=u.className,o=u.children,l=u.dashed,E=u.plain,F=f(u,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),g=C("divider",O),v=P.length>0?"-".concat(P):P,d=!!o,D=P==="left"&&r!=null,U=P==="right"&&r!=null,M=y()(g,"".concat(g,"-").concat(b),(i={},(0,m.Z)(i,"".concat(g,"-with-text"),d),(0,m.Z)(i,"".concat(g,"-with-text").concat(v),d),(0,m.Z)(i,"".concat(g,"-dashed"),!!l),(0,m.Z)(i,"".concat(g,"-plain"),!!E),(0,m.Z)(i,"".concat(g,"-rtl"),R==="rtl"),(0,m.Z)(i,"".concat(g,"-no-default-orientation-margin-left"),D),(0,m.Z)(i,"".concat(g,"-no-default-orientation-margin-right"),U),i),s),T=(0,e.Z)((0,e.Z)({},D&&{marginLeft:r}),U&&{marginRight:r});return h.createElement("div",(0,e.Z)({className:M},F,{role:"separator"}),o&&b!=="vertical"&&h.createElement("span",{className:"".concat(g,"-inner-text"),style:T},o))};const A=t},19856:(L,x,n)=>{n.d(x,{D:()=>h});var e=n(95268),m=n(75217),c=n(52983),y=n(98281);const h=c.memo(I=>{const{invite:f}=I;return f.expiredAt&&new Date(f.expiredAt).valueOf()<Date.now()?c.createElement("span",null,(0,y.t)("\u8BE5\u9080\u8BF7\u7801\u5DF2\u8FC7\u671F")):c.createElement(c.Fragment,null,f.expiredAt?c.createElement(y.cCv,null,"\u8BE5\u9080\u8BF7\u5C06\u4E8E"," ",c.createElement(e.Z,{title:(0,y.KJm)(f.expiredAt)},c.createElement("span",{className:"font-bold"},{date:(0,y.u39)(f.expiredAt)}))," ","\u8FC7\u671F"):c.createElement("span",null,(0,y.t)("\u8BE5\u9080\u8BF7\u7801\u6C38\u4E0D\u8FC7\u671F")),f.usageLimit&&c.createElement(c.Fragment,null,c.createElement(m.Z,{type:"vertical"}),c.createElement(y.cCv,null,"\u53EF\u4F7F\u7528"," ",c.createElement("span",{className:"font-bold"},{num:f.usageLimit})," ","\u6B21")))});h.displayName="InviteCodeExpiredAt"},66559:(L,x,n)=>{n.d(x,{V:()=>c,v:()=>y});var e=n(52983),m=n(98281);const c=e.memo(I=>{var f;const{userId:t,showDiscriminator:A,className:p,style:u,fallbackName:i}=I,a=(0,m.xzJ)(t);return e.createElement("span",{className:p,style:u},(f=a.nickname)!=null?f:(0,m.YQu)(i)?i:e.createElement("span",null,"\xA0"),A&&e.createElement(h,{discriminator:a.discriminator}))});c.displayName="UserNamePure";const y=e.memo(I=>{var f;const{userId:t,showDiscriminator:A,className:p,style:u,fallbackName:i}=I,a=(0,m.xzJ)(t),C=(0,m.TQq)(t);return e.createElement("span",{className:p,style:u},C?e.createElement(e.Fragment,null,C,e.createElement("span",{className:"opacity-60"},"(",a.nickname,")")):(f=a.nickname)!=null?f:(0,m.YQu)(i)?i:e.createElement("span",null,"\xA0"),A&&e.createElement(h,{discriminator:a.discriminator}))});y.displayName="UserName";const h=e.memo(({discriminator:I})=>e.createElement("span",{className:"text-gray-500 dark:text-gray-300 opacity-0 group-hover:opacity-100"},"#",I));h.displayName="UserNameDiscriminator"},49002:(L,x,n)=>{n.r(x),n.d(x,{default:()=>P});var e=n(52983),m=n(54782),c=n(93540),y=n(19856),h=n(38887),I=n(66559),f=n(75217),t=n(98281),A=n(84208),p=n(87450),u=n(75526);const i=e.memo(r=>{const{closeModal:s}=(0,A.vR)(),o=(0,m.useNavigate)(),l=(0,e.useCallback)(()=>{s(),o(`/main/group/${r.groupId}`)},[s,r.groupId]);return e.createElement(A.AB,{title:(0,t.t)("\u52A0\u5165\u7FA4\u7EC4\u6210\u529F!")},e.createElement("div",null,e.createElement(u.Z,{block:!0,type:"primary",size:"large",onClick:l},(0,t.t)("\u8DF3\u8F6C\u5230\u7FA4\u7EC4"))))});i.displayName="SuccessModal";var a=(r,s,o)=>new Promise((l,E)=>{var F=d=>{try{v(o.next(d))}catch(D){E(D)}},g=d=>{try{v(o.throw(d))}catch(D){E(D)}},v=d=>d.done?l(d.value):Promise.resolve(d.value).then(F,g);v((o=o.apply(r,s)).next())});const C=e.memo(r=>{const s=(0,m.useNavigate)(),{loading:o,value:l}=(0,t.r53)(()=>a(void 0,null,function*(){const M=yield(0,p.pT)();return M?yield(0,t.YXr)(M):!1})),[E,F]=(0,e.useState)(!1),g=(0,e.useCallback)(()=>{s(`/entry/login?redirect=${encodeURIComponent(location.pathname)}`)},[]),{value:v}=(0,t.r53)(()=>(0,t.ct2)(r.inviteCode),[r.inviteCode]);(0,t.r53)(()=>a(void 0,null,function*(){if(!!l&&!!v)try{(yield t.o4J.ru.isMember(v.groupId))&&F(!0)}catch(M){}}),[l,v]);const[{loading:d},D]=(0,t.CoE)(()=>a(void 0,null,function*(){if(yield(0,t.GM2)(r.inviteCode),!v){(0,t.hJM)((0,t.t)("\u672A\u627E\u5230\u9080\u8BF7\u7801\u4FE1\u606F"));return}(0,A.h7)(e.createElement(i,{groupId:v.groupId}),{maskClosable:!1}),F(!0)}),[r.inviteCode,v]),[,U]=(0,t.CoE)(()=>a(void 0,null,function*(){if(!v){(0,t.hJM)((0,t.t)("\u672A\u627E\u5230\u9080\u8BF7\u7801\u4FE1\u606F"));return}s(`/main/group/${v.groupId}`)}),[s,v]);return o?null:E?e.createElement(u.Z,{block:!0,type:"primary",size:"large",onClick:U},(0,t.t)("\u5DF2\u52A0\u5165\uFF0C\u8DF3\u8F6C\u5230\u7FA4\u7EC4")):r.expired&&new Date(r.expired).valueOf()<Date.now()?e.createElement(u.Z,{block:!0,type:"primary",size:"large",disabled:!0},(0,t.t)("\u9080\u8BF7\u7801\u5DF2\u8FC7\u671F")):l?e.createElement(u.Z,{block:!0,type:"primary",size:"large",loading:d,onClick:D},(0,t.t)("\u52A0\u5165\u7FA4\u7EC4")):e.createElement(u.Z,{block:!0,type:"primary",size:"large",onClick:g},(0,t.t)("\u5C1A\u672A\u767B\u5F55, \u7ACB\u5373\u767B\u5F55"))});C.displayName="JoinBtn";var R=(r,s,o)=>new Promise((l,E)=>{var F=d=>{try{v(o.next(d))}catch(D){E(D)}},g=d=>{try{v(o.throw(d))}catch(D){E(D)}},v=d=>d.done?l(d.value):Promise.resolve(d.value).then(F,g);v((o=o.apply(r,s)).next())});const O=e.memo(r=>{const{inviteCode:s}=r,{loading:o,value:l}=(0,t.r53)(()=>R(void 0,null,function*(){try{const E=yield(0,t.ct2)(s);if(E===null)throw new Error((0,t.t)("\u627E\u4E0D\u5230\u9080\u8BF7\u4FE1\u606F"));const F=yield(0,t.doy)(E.groupId);if(F===null)throw new Error((0,t.t)("\u627E\u4E0D\u5230\u7FA4\u7EC4\u4FE1\u606F"));return r.onLoadInfo(F),{group:F,creator:E.creator,expired:E.expiredAt}}catch(E){(0,t.hJM)(E)}}),[s]);return o?e.createElement(h.T,null):l?e.createElement(e.Fragment,null,e.createElement("div",{className:"text-white"},e.createElement("div",null,e.createElement(c.qE,{className:"mx-auto mb-4",size:64,src:l.group.avatar,name:l.group.name})),e.createElement("div",null,e.createElement(I.V,{className:"font-bold",userId:l.creator})," ",(0,t.t)("\u9080\u8BF7\u60A8\u52A0\u5165\u7FA4\u7EC4")),e.createElement("div",{className:"text-xl my-2 font-bold"},l.group.name),e.createElement("div",null,(0,t.t)("\u5F53\u524D\u6210\u5458\u6570"),": ",l.group.memberCount),l.expired&&e.createElement("div",null,e.createElement(y.D,{invite:{expiredAt:l.expired}}))),e.createElement(f.Z,null),e.createElement(C,{inviteCode:s,expired:l.expired})):e.createElement("div",null,(0,t.t)("\u7FA4\u7EC4\u4FE1\u606F\u52A0\u8F7D\u5931\u8D25"))});O.displayName="InviteInfo";var B=n(442),b=n(82335);const N=e.memo(()=>{const{inviteCode:r=""}=(0,m.useParams)(),[s,o]=(0,e.useState)("");(0,b.bw)("appInviteRenderStart");const l=(0,e.useMemo)(()=>s?{backgroundImage:`url(${(0,t.Awg)(s)})`}:{backgroundImage:"var(--tc-background-image)"},[s]);return e.createElement(B.$2,null,e.createElement("div",{className:"h-full w-full bg-gray-600 flex justify-center items-center bg-center bg-cover bg-no-repeat",style:l},e.createElement("div",{className:"w-96 p-4 rounded-lg shadow-lg bg-black bg-opacity-60 text-center"},e.createElement(O,{inviteCode:r,onLoadInfo:E=>{E.backgroundImage&&o(E.backgroundImage)}}))))});N.displayName="InviteRoute";const P=N}}]);
