"use strict";(self.webpackChunktailchat_web=self.webpackChunktailchat_web||[]).push([[817],{61500:(j,g,t)=>{t.d(g,{R$:()=>y,SH:()=>h,Ux:()=>v});var i=t(52983),A=t(54782),u=t(98281);const v=i.memo(m=>{const c=(0,A.useNavigate)();return i.createElement("div",{className:"absolute bottom-4 left-0 right-0 text-center"},i.createElement("div",{className:"shadow-lg px-6 py-2 rounded-full inline-block bg-indigo-600 hover:bg-indigo-700 text-white cursor-pointer",onClick:()=>{c(m.link)}},m.text))});v.displayName="JumpToButton";const h=i.memo(m=>{const c=`/main/group/${m.groupId}/${m.panelId}`;return i.createElement(v,{link:c,text:(0,u.t)("\u8DF3\u8F6C\u5230\u9762\u677F")})});h.displayName="JumpToGroupPanelButton";const y=i.memo(m=>{const c=m.groupId?`/main/group/${m.groupId}/${m.converseId}`:`/main/personal/converse/${m.converseId}`;return i.createElement(v,{link:c,text:(0,u.t)("\u8DF3\u8F6C\u5230\u4F1A\u8BDD")})});y.displayName="JumpToConverseButton"},28074:(j,g,t)=>{t.d(g,{U:()=>N,c:()=>U});var i=t(80474),A=t(72297),u=t(52983),v=t(98281),h=t(93540),y=t(66175),m=t(44611);const c=(0,i.P)(()=>Promise.all([t.e(994),t.e(20)]).then(t.bind(t,28020))),N=u.memo(({raw:D,baseUrl:F})=>{const B=(0,u.useCallback)(o=>(o=(0,v.Awg)(o),(0,v.YQu)(F)?new URL(o,(0,A.Cr)(F)).href:o),[F]),S=(0,u.useMemo)(()=>({img:o=>u.createElement(h.Ee,{style:o.style,width:o.width,height:o.height,src:o.src,preview:!0})}),[]);return u.createElement(c,{className:"tailchat-markdown",transformImageUri:o=>B(o),transformLinkUri:o=>B(o),remarkPlugins:[y.Z],rehypePlugins:[m.Z],linkTarget:"_blank",skipHtml:!0,components:S},D)});N.displayName="Markdown";const U=(0,i.P)(()=>Promise.all([t.e(994),t.e(556),t.e(943)]).then(t.bind(t,92943)).then(D=>D.MarkdownEditor))},31175:(j,g,t)=>{t.r(g),t.d(g,{Avatar:()=>o.qE,AvatarUploader:()=>it.C,BaseChatInputButton:()=>ct.L,Button:()=>A.Z,Card:()=>mt,Checkbox:()=>u.Z,CopyableText:()=>o.v$,DefaultFullModalInputEditorRender:()=>J.jo,DefaultFullModalTextAreaEditorRender:()=>J.lj,Divider:()=>v.Z,Emoji:()=>Nt.d,Empty:()=>D.Z,ErrorBoundary:()=>Bt.S,ErrorView:()=>H.o,FullModalField:()=>J.LP,GroupExtraDataPanel:()=>b,GroupPanelContainer:()=>$.q,GroupPanelSelector:()=>_,Icon:()=>o.JO,IconBtn:()=>G.a,Image:()=>o.Ee,ImageUploader:()=>it.w,Input:()=>i.Z,JumpToButton:()=>R.Ux,JumpToConverseButton:()=>R.R$,JumpToGroupPanelButton:()=>R.SH,Link:()=>ut.rU,Loadable:()=>It.P,Loading:()=>K.g,LoadingOnFirst:()=>At.t,LoadingSpinner:()=>Ot.T,Markdown:()=>ot.U,MarkdownEditor:()=>ot.c,Menu:()=>y.Z,MessageAckContainer:()=>vt.H,ModalWrapper:()=>P.AB,NoData:()=>Wt.J,NotFound:()=>jt.T,PillTabPane:()=>k.c,PillTabs:()=>k.N,Popover:()=>F.Z,PortalAdd:()=>tt.rk,PortalRemove:()=>tt.i6,Problem:()=>V.t,SensitiveText:()=>o.PJ,SidebarView:()=>Dt.u,Skeleton:()=>S.Z,Space:()=>h.Z,Switch:()=>c.Z,Table:()=>m.Z,Tag:()=>B.Z,TextArea:()=>Vt,Tooltip:()=>N.Z,UserAvatar:()=>rt,UserName:()=>Lt.v,WebFastForm:()=>o.Po,WebMetaForm:()=>o.Po,Webview:()=>lt.tP,WebviewKeepAlive:()=>lt._W,closeModal:()=>P.Mr,createMetaFormSchema:()=>o._D,metaFormFieldSchema:()=>o._6,notification:()=>U.Z,openConfirmModal:()=>P._5,openModal:()=>P.h7,openReconfirmModal:()=>P.VW,useChatInputActionContext:()=>ft.at,useModalContext:()=>P.vR,withKeepAliveOverlay:()=>$t.A});var i=t(79546),A=t(75526),u=t(66990),v=t(75217),h=t(58761),y=t(3301),m=t(69104),c=t(44411),N=t(95268),U=t(43991),D=t(65097),F=t(20685),B=t(56489),S=t(55696),o=t(93540),ut=t(10330),vt=t(16365),ct=t(28723),ft=t(29254),$=t(29188),Et=t(85478),r=t(52983),s=t(98281),V=t(6739),H=t(21597),K=t(18300),G=t(84143),P=t(84208),Pt=t(85466),pt=t.n(Pt),gt=Object.defineProperty,ht=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,z=(e,a,n)=>a in e?gt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,Z=(e,a)=>{for(var n in a||(a={}))xt.call(a,n)&&z(e,n,a[n]);if(X)for(var n of X(a))Ct.call(a,n)&&z(e,n,a[n]);return e},Q=(e,a)=>ht(e,yt(a)),Y=(e,a,n)=>new Promise((l,f)=>{var x=d=>{try{p(n.next(d))}catch(M){f(M)}},E=d=>{try{p(n.throw(d))}catch(M){f(M)}},p=d=>d.done?l(d.value):Promise.resolve(d.value).then(x,E);p((n=n.apply(e,a)).next())});const w=r.memo(e=>{const{groupId:a,panelId:n,names:l}=e,[f,x]=(0,r.useReducer)(C=>C+1,0),{value:E={},loading:p,error:d}=(0,s.r53)(()=>Y(void 0,null,function*(){return(yield Promise.all(l.map(I=>s.o4J.ru.getGroupPanelExtraData(e.groupId,e.panelId,I).then(O=>({name:I,data:O}))))).reduce((I,O)=>Q(Z({},I),{[O.name]:O.data}),{})}),[a,n,l,f]),[M]=(0,s.WHr)(a,[s.g3S.core.managePanel]),W=(0,r.useRef)(!1),Ht=(0,s.nWw)(()=>{const C=Z({},E);if(!e.renderEdit){console.warn("[GroupExtraDataPanel] Please set renderEdit");return}const I=()=>Y(void 0,null,function*(){if(W.current===!0){(0,s.lHp)((0,s.t)("\u6B63\u5728\u4FDD\u5B58, \u8BF7\u7A0D\u540E"));return}pt()(C,E)||(W.current=!0,yield Promise.all(Object.entries(C).map(([O,Kt])=>s.o4J.ru.saveGroupPanelExtraData(a,n,O,Kt))),W.current=!1,x(),(0,s.jiy)())});(0,P.h7)(e.renderEdit(C),{onCloseModal:I})});return d?r.createElement(H.o,{error:d}):r.createElement($.q,{groupId:a,panelId:n,prefixActions:()=>M?[r.createElement(G.a,{key:"edit",title:(0,s.t)("\u7F16\u8F91"),shape:"square",icon:"mdi:square-edit-outline",iconClassName:"text-2xl",onClick:Ht})]:[]},r.createElement(K.g,{className:"h-full w-full",spinning:p},r.createElement("div",{className:"overflow-auto h-full"},e.render(E))))});w.displayName="GroupExtraDataPanelInner";const b=r.memo(e=>{const a=(0,Et.D)();return a===null?r.createElement(V.t,{text:(0,s.t)("\u7EC4\u4EF6\u53EA\u80FD\u5728\u7FA4\u7EC4\u9762\u677F\u4E2D\u624D\u80FD\u6B63\u5E38\u663E\u793A")}):r.createElement(w,Q(Z({},e),{groupId:a.groupId,panelId:a.panelId}))});b.displayName="GroupExtraDataPanel";var k=t(83667),J=t(7606),It=t(80474),Ot=t(38887),At=t(36932),Dt=t(3856),q=t(73246),Ft=t(50842);const{Option:Mt}=q.Z,_=r.memo(e=>{var a,n;const l=(0,Ft.b)(),f=(a=e.groupId)!=null?a:l,x=(n=e.panelType)!=null?n:s.Xpe.TEXT,E=(0,s.Ew8)(f),p=(0,r.useMemo)(()=>E.filter(d=>d.type===x),[E,x]);return r.createElement(q.Z,{className:e.className,style:e.style,placeholder:(0,s.t)("\u8BF7\u9009\u62E9\u9762\u677F"),value:e.value,onChange:e.onChange},p.map(d=>r.createElement(Mt,{key:d.id,value:d.id},d.name)))});_.displayName="GroupPanelSelector";var Nt=t(53652),tt=t(442),Bt=t(67706),Tt=Object.defineProperty,Ut=Object.defineProperties,St=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,nt=(e,a,n)=>a in e?Tt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,Gt=(e,a)=>{for(var n in a||(a={}))et.call(a,n)&&nt(e,n,a[n]);if(T)for(var n of T(a))at.call(a,n)&&nt(e,n,a[n]);return e},Zt=(e,a)=>Ut(e,St(a)),Jt=(e,a)=>{var n={};for(var l in e)et.call(e,l)&&a.indexOf(l)<0&&(n[l]=e[l]);if(e!=null&&T)for(var l of T(e))a.indexOf(l)<0&&at.call(e,l)&&(n[l]=e[l]);return n};const rt=r.memo(e=>{const a=e,{userId:n}=a,l=Jt(a,["userId"]),f=(0,s.xzJ)(n);return r.createElement(o.qE,Zt(Gt({},l),{src:f.avatar,name:f.nickname}))});rt.displayName="UserAvatar";var Lt=t(66559),ot=t(28074),lt=t(45305),Rt=t(74774);const L=r.memo(e=>r.createElement("div",{className:"w-3/4"},r.createElement("div",{className:"max-w-full border border-black border-opacity-20 rounded-md p-2 bg-black bg-opacity-5 dark:bg-black dark:bg-opacity-10 inline-flex overflow-hidden",style:{minWidth:240}},e.children)));L.displayName="CardWrapper";const st=r.memo(e=>{var a;const n=(a=e.payload)!=null?a:{},l=(0,s.nWw)(()=>{(0,Rt.GR)(n.url,n.label)});return r.createElement(L,null,r.createElement("div",{className:"flex w-full items-center"},r.createElement("div",{className:"mr-3 overflow-hidden flex-1"},r.createElement("div",{className:"flex text-lg items-center"},r.createElement(o.JO,{icon:"mdi:paperclip"}),r.createElement("span",{className:"ml-1"},(0,s.t)("\u6587\u4EF6"))),r.createElement("div",{className:"text-sm text-black text-opacity-60 dark:text-white dark:text-opacity-60"},n.label)),r.createElement(G.a,{title:(0,s.t)("\u4E0B\u8F7D"),icon:"mdi:cloud-download-outline",onClick:l})))});st.displayName="FileCard";var dt=t(7975);const mt=r.memo(e=>{if(dt.pluginCardItemMap[e.type]){const n=dt.pluginCardItemMap[e.type].render;return r.createElement(n,{payload:e.payload})}return e.type==="file"?r.createElement(st,{payload:e.payload}):r.createElement(L,null,(0,s.t)("\u672A\u77E5\u7684\u5361\u7247\u7C7B\u578B"))});mt.displayName="Card";var R=t(61500),Wt=t(15333),jt=t(64939),$t=t(74312),it=t(92951);const Vt=i.Z.TextArea}}]);
